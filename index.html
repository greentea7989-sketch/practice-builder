<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>식사 메뉴 추첨기</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;600;700&family=Gowun+Dodum&display=swap" rel="stylesheet">
</head>
<body>
    <header class="site-header">
        <div class="brand">
            <span class="brand-tag">Menu Raffle</span>
            <h1>식사 메뉴 추첨기</h1>
            <p>후보를 모아 한 번에 뽑아보세요. 오늘의 메뉴는 운명에 맡깁니다.</p>
        </div>
        <div class="header-actions">
            <button id="theme-toggle" class="theme-toggle" type="button" aria-pressed="false">
                다크모드
            </button>
            <button id="draw-button" class="primary-btn" type="button">
                지금 추첨
            </button>
        </div>
    </header>

    <main class="grid">
        <section class="card input-card">
            <h2>후보 입력</h2>
            <p class="helper">줄마다 메뉴 1개씩 입력하세요. 콤마(,)로도 구분됩니다.</p>
            <textarea id="menu-input" placeholder="예: 김치찌개 #한식 #찌개\n초밥 #일식\n파스타 | 양식, 크리미"></textarea>
            <div class="inline-actions">
                <button id="clear-input" class="ghost-btn" type="button">비우기</button>
            </div>
            <div class="meta-row">
                <span id="menu-count">후보 0개</span>
                <span id="filtered-count">필터 적용 후 0개</span>
            </div>
        </section>

        <section class="card option-card">
            <h2>추첨 옵션</h2>
            <div class="field-grid">
                <label class="field">
                    <span>뽑을 개수</span>
                    <input id="draw-count" type="number" min="1" value="1">
                </label>
                <label class="field toggle-field">
                    <span>중복 허용</span>
                    <input id="allow-duplicate" type="checkbox">
                    <span class="toggle-slider"></span>
                </label>
            </div>
            <label class="field">
                <span>제외 키워드</span>
                <input id="exclude-input" type="text" placeholder="예: 매운, 해산물, 면">
                <small>키워드가 포함된 메뉴는 자동 제외됩니다.</small>
            </label>
            <label class="field">
                <span>분위기</span>
                <div class="mood-buttons">
                    <button class="mood-btn" type="button" data-mood="간단하게">간단하게</button>
                    <button class="mood-btn" type="button" data-mood="든든하게">든든하게</button>
                    <button class="mood-btn" type="button" data-mood="가볍게">가볍게</button>
                    <button class="mood-btn" type="button" data-mood="매콤하게">매콤하게</button>
                </div>
            </label>
            <div class="status" id="status-message">메뉴를 입력하고 추첨 버튼을 눌러보세요.</div>
        </section>

        <section class="card result-card">
            <div class="result-header">
                <h2>오늘의 메뉴</h2>
                <div class="result-actions">
                    <button id="copy-result" class="ghost-btn" type="button">결과 복사</button>
                    <button id="clear-history" class="ghost-btn" type="button">기록 지우기</button>
                </div>
            </div>
            <div id="result-box" class="result-box">
                <p class="placeholder">아직 추첨 전입니다.</p>
            </div>
            <div class="history">
                <h3>추첨 기록</h3>
                <ul id="history-list"></ul>
            </div>
        </section>

        <section class="card contact-card">
            <h2>제휴 문의</h2>
            <p class="helper">제품/서비스 제휴, 공동 프로모션, 컨텐츠 협업 등 편하게 문의 주세요.</p>
            <form action="https://formspree.io/f/mgolkawk" method="POST" class="contact-form">
                <input type="hidden" name="_subject" value="Menu Raffle 제휴 문의">
                <div class="form-grid">
                    <label class="field">
                        <span>이름</span>
                        <input type="text" name="name" placeholder="홍길동" required>
                    </label>
                    <label class="field">
                        <span>이메일</span>
                        <input type="email" name="email" placeholder="name@company.com" required>
                    </label>
                    <label class="field field--full">
                        <span>회사/팀</span>
                        <input type="text" name="company" placeholder="회사명 또는 팀명">
                    </label>
                    <label class="field field--full">
                        <span>문의 내용</span>
                        <textarea name="message" placeholder="제휴 목적, 일정, 예산 범위 등을 알려주세요." required></textarea>
                    </label>
                </div>
                <label class="consent">
                    <input type="checkbox" name="consent" value="agree" required>
                    <span>제휴 문의 처리를 위해 이름, 이메일, 회사/팀, 문의 내용을 수집하는 것에 동의합니다.</span>
                </label>
                <p class="consent-note">수집된 정보는 문의 응대 목적 외에는 사용하지 않으며, 처리 후 90일 내 파기합니다.</p>
                <div class="form-actions">
                    <button class="primary-btn" type="submit">제휴 문의 보내기</button>
                    <span class="form-note">제출 시 Formspree를 통해 이메일로 전달됩니다.</span>
                </div>
                <div class="form-status" role="status" aria-live="polite"></div>
            </form>
        </section>

        <section class="card comments-card">
            <h2>댓글</h2>
            <p class="helper">식사 메뉴 아이디어를 공유해 주세요.</p>
            <div id="disqus_thread"></div>
            <noscript>댓글을 보려면 자바스크립트를 활성화해 주세요.</noscript>
        </section>
    </main>

    <script>
        const disqusShortname = 'YOUR_DISQUS_SHORTNAME';
        const disqus_config = function () {
            this.page.url = window.location.href;
            this.page.identifier = window.location.pathname || 'menu-raffle';
        };

        if (disqusShortname && disqusShortname !== 'YOUR_DISQUS_SHORTNAME') {
            (function () {
                const d = document;
                const s = d.createElement('script');
                s.src = `https://${disqusShortname}.disqus.com/embed.js`;
                s.setAttribute('data-timestamp', String(+new Date()));
                (d.head || d.body).appendChild(s);
            })();
        }
    </script>
    <script src="main.js"></script>
</body>
</html>
